# Promise 객체 추가정리

await는 해당 context의 종료를 기다려주는 것이 아니다. await 키워드는 해당하는 Promise 객체(동기화된 작업)의 종료를 기다려주는 것이다. 자바스크립트의 구조상 비동기화된 작업(context)이 먼저 처리되고 그다음으로 동기화된 작업이 처리된다.

그리고 then 함수는 동기화시켜주고 연속적으로 프로미스를 처리하고 프로미스를 반환하는 작업이다. 웹 검색으로 찾아보니 꽤 많은 사람들이 then과 await를 비교했지만, 사용법만 비교하면 비슷하겠지만 내용은 많이 달랐다.

무슨 의미냐면 await가 우선순위를 바꿔주고 동기 작업을 먼저 처리하게 만드는 것과는 달리, then은 Promise의 우선순위를 바꾸지 않는다. 즉 context에서 await를 이용하면 값을 받을 수 있지만, 그와 달리 then을 이용하면 값을 받을 수 없다. 왜냐하면 then에서는 작업이 종료되지 않았으니 아무 값도 받지 못하거나 해당 context가 실행되지 않는다.

게다가 then은 사용목적이 체이닝을 통해 여러 작업들을 수행하고 동기화, await는 비동기 작업과 동기 작업의 우선순위를 바꿔주기 위함이다. 둘은 전혀 다른 용도였다. 물론 사용처는 겹치는 곳이 많지만, 내용 자체는 개인적으로 느끼기엔 많이 달랐다.

then과 await는 함께 쓸 수 있으며, 실제로 then으로 체이닝된 promise 객체를 await 키워드로 실행시켜봤더니 then으로 체이닝된 마지막 작업까지 동기화 작업들보다 먼저 수행됐다.

ps. 4시간 정도는 promise에 헤매다가 버린듯하다...

- 추가 수정: 비동기화와 동기화를 잘못 알았다, 내용의 일부를 삭제하고 첨언하며 수정했다.
  참고 사이트 https://ko.javascript.info/async-await
  https://ko.javascript.info/promise-chaining
